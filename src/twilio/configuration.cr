#  Twilio - Api
#
# This is the public Twilio REST API.
#
# The version of the OpenAPI document: 1.38.0
# Contact: support@twilio.com
# Generated by: https://openapi-generator.tech
#

require "log"

module Twilio
  class Configuration
    # Defines url scheme
    property scheme : String

    # Defines url host
    property host : String

    # Defines url base path
    property base_path : String

    # Define server configuration index
    property server_index : Int32

    # Define server operation configuration index
    property server_operation_index : Hash(String, String)

    # Default server variables
    property server_variables : Hash(String, String)

    # Default server operation variables
    property server_operation_variables : Hash(String, String)

    # Defines API keys used with API Key authentications.
    #
    # @return [Hash] "key" => parameter name, value: parameter value (API key)
    #
    # @example parameter name is "api_key", API key is "xxx" (e.g. "api_key=xxx" in query string)
    #   config.api_key["api_key"] = "xxx"
    property api_key : Hash(String, String)

    # Defines API key prefixes used with API Key authentications.
    #
    # @return [Hash] "key" => parameter name, value: API key prefix
    #
    # @example parameter name is "Authorization", API key prefix is "Token" (e.g. "Authorization: Token xxx" in headers)
    #   config.api_key_prefix["api_key"] = "Token"
    property api_key_prefix : Hash(String, String)

    # Defines the username used with HTTP basic authentication.
    #
    # @return [String]
    property username : String?

    # Defines the password used with HTTP basic authentication.
    #
    # @return [String]
    property password : String?

    # Defines the access token (Bearer) used with OAuth2.
    property access_token : String?

    # Set this to enable/disable debugging. When enabled (set to true), HTTP request/response
    # details will be logged with `logger.debug` (see the `logger` attribute).
    # Default to false.
    #
    # @return [true, false]
    property? debugging : Bool

    # Defines the temporary folder to store downloaded files
    # (for API endpoints that have file response).
    # Default to use `Tempfile`.
    #
    # @return [String]
    property temp_folder_path : String?

    # The time limit for HTTP request in seconds.
    # Default to 0 (never times out).
    property timeout : Int32

    # Set this to false to skip client side validation in the operation.
    # Default to true.
    # @return [true, false]
    property? client_side_validation : Bool

    # ## TLS/SSL setting
    # Set this to false to skip verifying SSL certificate when calling API from https server.
    # Default to true.
    #
    # @note Do NOT set it to false in production code, otherwise you would face multiple types of cryptographic attacks.
    #
    # @return [true, false]
    # TODO attr_accessor :verify_ssl

    # ## TLS/SSL setting
    # Set this to false to skip verifying SSL host name
    # Default to true.
    #
    # @note Do NOT set it to false in production code, otherwise you would face multiple types of cryptographic attacks.
    #
    # @return [true, false]
    # TODO attr_accessor :verify_ssl_host

    # ## TLS/SSL setting
    # Set this to customize the certificate file to verify the peer.
    #
    # @return [String] the path to the certificate file
    #
    # @see The `cainfo` option of Typhoeus, `--cert` option of libcurl. Related source code:
    # https://github.com/typhoeus/typhoeus/blob/master/lib/typhoeus/easy_factory.rb#L145
    # TODO attr_accessor :ssl_ca_cert

    # ## TLS/SSL setting
    # Client certificate file (for client certificate)
    # TODO attr_accessor :cert_file

    # ## TLS/SSL setting
    # Client private key file (for client certificate)
    # TODO attr_accessor :key_file

    # Set this to customize parameters encoding of array parameter with multi collectionFormat.
    # Default to Nil.
    #
    # @see The params_encoding option of Ethon. Related source code:
    # https://github.com/typhoeus/ethon/blob/master/lib/ethon/easy/queryable.rb#L96
    # property params_encoding : String?

    # Create a new `Configuration`.
    def initialize
      @scheme = "https"
      @host = "api.twilio.com"
      @base_path = ""
      @server_index = 0
      @server_operation_index = {} of String => String
      @server_variables = {} of String => String
      @server_operation_variables = {} of String => String
      @api_key = {} of String => String
      @api_key_prefix = {} of String => String
      @timeout = 0
      @client_side_validation = true
      @verify_ssl = true
      @verify_ssl_host = true
      # @params_encoding = nil
      # @cert_file = nil
      # @key_file = nil
      @debugging = false
      @username = nil
      @password = nil
      @access_token = nil
      @temp_folder_path = nil
    end

    # Create a new `Configuration` with block.
    #
    # ```
    # config = Petstore::Configuration.new do |config|
    #   config.username = "xxx"
    #   config.password = "xxx"
    # end
    # ```
    def initialize(&)
      initialize
      yield self
    end

    # The default Configuration object.
    def self.default
      @@default ||= Configuration.new
    end

    # Configure object with block.
    def configure(&)
      yield self
    end

    def scheme=(scheme)
      # remove :// from scheme
      @scheme = scheme.sub(/:\/\//, "")
    end

    def host=(host)
      # remove http(s):// and anything after a slash
      @host = host.sub(/https?:\/\//, "").split("/").first
    end

    def base_path=(base_path)
      # Add leading and trailing slashes to base_path
      @base_path = "/#{base_path}".gsub(/\/+/, "/")
      @base_path = "" if @base_path == "/"
    end

    # Returns base URL for specified operation based on server settings
    def base_url(operation : String? = nil)
      # TODO revise below to support operation-level server setting
      # index = server_operation_index.fetch(operation, server_index)
      "#{scheme}://#{[host, base_path].join("/").gsub(/\/+/, "/")}".sub(/\/+\z/, "") # if index == Nil

      # server_url(index, server_operation_variables.fetch(operation, server_variables), operation_server_settings[operation])
    end

    # Gets API key (with prefix if set).
    # @param [String] param_name the parameter name of API key auth
    def api_key_with_prefix(param_name)
      prefix = @api_key_prefix[param_name]?
      if prefix.nil?
        @api_key[param_name]? || ""
      else
        "#{prefix} #{@api_key[param_name]}"
      end
    end

    # Gets Basic Auth token string
    def basic_auth_token
      "Basic #{Base64.strict_encode("#{username}:#{password}")}"
    end

    # Returns Auth Settings hash for api client.
    def auth_settings
      {
        "accountSid_authToken" => {
          "type"  => "basic",
          "in"    => "header",
          "key"   => "Authorization",
          "value" => basic_auth_token,
        },
      } of String => Hash(String, String)
    end

    # Returns an array of Server setting
    def server_settings
      [
        {
          "url"         => "https://api.twilio.com",
          "description" => "No description provided",
        },
      ]
    end

    def operation_server_settings
      {
        "AccountsApi.create_account" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AccountsApi.list_account" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AddressesApi.create_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AddressesApi.delete_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AddressesApi.fetch_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AddressesApi.list_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AddressesApi.list_dependent_phone_number" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AddressesApi.update_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ApplicationsApi.create_application" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ApplicationsApi.delete_application" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ApplicationsApi.fetch_application" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ApplicationsApi.list_application" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ApplicationsApi.update_application" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AuthorizedConnectAppsApi.fetch_authorized_connect_app" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AuthorizedConnectAppsApi.list_authorized_connect_app" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.fetch_available_phone_number_country" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.list_available_phone_number_country" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.list_available_phone_number_local" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.list_available_phone_number_machine_to_machine" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.list_available_phone_number_mobile" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.list_available_phone_number_national" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.list_available_phone_number_shared_cost" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.list_available_phone_number_toll_free" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "AvailablePhoneNumbersApi.list_available_phone_number_voip" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "BalanceApi.fetch_balance" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.create_call" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.create_call_feedback_summary" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.create_call_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.create_payments" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.create_user_defined_message" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.create_user_defined_message_subscription" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.delete_call" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.delete_call_feedback_summary" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.delete_call_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.delete_user_defined_message_subscription" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.fetch_call" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.fetch_call_feedback" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.fetch_call_feedback_summary" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.fetch_call_notification" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.fetch_call_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.list_call" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.list_call_event" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.list_call_notification" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.list_call_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.update_call" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.update_call_feedback" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.update_call_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.update_payments" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.update_siprec" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "CallsApi.update_stream" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.create_participant" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.delete_conference_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.delete_participant" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.fetch_conference" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.fetch_conference_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.fetch_participant" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.list_conference" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.list_conference_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.list_participant" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.update_conference" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.update_conference_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConferencesApi.update_participant" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConnectAppsApi.delete_connect_app" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConnectAppsApi.fetch_connect_app" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConnectAppsApi.list_connect_app" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "ConnectAppsApi.update_connect_app" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.create_incoming_phone_number" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.create_incoming_phone_number_assigned_add_on" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.create_incoming_phone_number_local" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.create_incoming_phone_number_mobile" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.create_incoming_phone_number_toll_free" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.delete_incoming_phone_number" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.delete_incoming_phone_number_assigned_add_on" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.fetch_incoming_phone_number" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.fetch_incoming_phone_number_assigned_add_on" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.fetch_incoming_phone_number_assigned_add_on_extension" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.list_incoming_phone_number" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.list_incoming_phone_number_assigned_add_on" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.list_incoming_phone_number_assigned_add_on_extension" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.list_incoming_phone_number_local" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.list_incoming_phone_number_mobile" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.list_incoming_phone_number_toll_free" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "IncomingPhoneNumbersApi.update_incoming_phone_number" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "KeysApi.create_new_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "KeysApi.delete_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "KeysApi.fetch_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "KeysApi.list_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "KeysApi.update_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.create_message" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.create_message_feedback" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.delete_media" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.delete_message" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.fetch_media" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.fetch_message" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.list_media" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.list_message" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "MessagesApi.update_message" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "NotificationsApi.fetch_notification" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "NotificationsApi.list_notification" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "OutgoingCallerIdsApi.create_validation_request" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "OutgoingCallerIdsApi.delete_outgoing_caller_id" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "OutgoingCallerIdsApi.fetch_outgoing_caller_id" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "OutgoingCallerIdsApi.list_outgoing_caller_id" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "OutgoingCallerIdsApi.update_outgoing_caller_id" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "QueuesApi.create_queue" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "QueuesApi.delete_queue" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "QueuesApi.fetch_member" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "QueuesApi.fetch_queue" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "QueuesApi.list_member" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "QueuesApi.list_queue" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "QueuesApi.update_member" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "QueuesApi.update_queue" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.delete_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.delete_recording_add_on_result" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.delete_recording_add_on_result_payload" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.delete_recording_transcription" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.fetch_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.fetch_recording_add_on_result" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.fetch_recording_add_on_result_payload" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.fetch_recording_transcription" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.list_recording" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.list_recording_add_on_result" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.list_recording_add_on_result_payload" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "RecordingsApi.list_recording_transcription" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_auth_calls_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_auth_calls_ip_access_control_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_auth_registrations_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_credential" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_credential_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_domain" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_ip_access_control_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_ip_access_control_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.create_sip_ip_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_auth_calls_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_auth_calls_ip_access_control_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_auth_registrations_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_credential" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_credential_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_domain" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_ip_access_control_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_ip_access_control_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.delete_sip_ip_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_auth_calls_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_auth_calls_ip_access_control_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_auth_registrations_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_credential" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_credential_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_domain" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_ip_access_control_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_ip_access_control_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.fetch_sip_ip_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_auth_calls_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_auth_calls_ip_access_control_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_auth_registrations_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_credential" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_credential_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_credential_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_domain" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_ip_access_control_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_ip_access_control_list_mapping" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.list_sip_ip_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.update_sip_credential" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.update_sip_credential_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.update_sip_domain" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.update_sip_ip_access_control_list" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SIPApi.update_sip_ip_address" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SMSApi.fetch_short_code" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SMSApi.list_short_code" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SMSApi.update_short_code" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SigningKeysApi.create_new_signing_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SigningKeysApi.delete_signing_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SigningKeysApi.fetch_signing_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SigningKeysApi.list_signing_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SigningKeysApi.update_signing_key" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SubAccountsApi.fetch_account" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "SubAccountsApi.update_account" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "TokensApi.create_token" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "TranscriptionsApi.delete_transcription" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "TranscriptionsApi.fetch_transcription" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "TranscriptionsApi.list_transcription" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.create_usage_trigger" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.delete_usage_trigger" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.fetch_usage_trigger" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record_all_time" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record_daily" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record_last_month" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record_monthly" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record_this_month" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record_today" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record_yearly" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_record_yesterday" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.list_usage_trigger" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
      {
        "UsageApi.update_usage_trigger" => [
          {
            "url"         => "https://api.twilio.com",
            "description" => "No description provided",
          },
        ],
      }
    end

    # Returns URL based on server settings
    #
    # @param index array index of the server settings
    # @param variables hash of variable and the corresponding value
    def server_url(index_string, variables = {} of String => String, servers = nil)
      servers = server_settings if servers.nil?

      index = index_string.to_i
      # check array index out of bound
      if index < 0 || index >= servers.size
        raise ArgumentError.new("Invalid index #{index} when selecting the server. Must be less than #{servers.size}")
      end

      server = servers[index]
      url = server["url"]

      return url unless server.has_key? "variables"

      # go through variable and assign a value
      server["variables"].each do |name, variable|
        if variables.has_key?(name)
          if !variable.has_key?("enum_values") || variable["enum_values"].includes?(variables[name])
            url.gsub! "{" + name.to_s + "}", variables[name]
          else
            raise ArgumentError.new("The variable `#{name}` in the server URL has invalid value #{variables[name]}. Must be #{variable["enum_values"]}.")
          end
        else
          # use default value
          url.gsub! "{" + name.to_s + "}", variable["default_value"]
        end
      end

      url
    end
  end
end
